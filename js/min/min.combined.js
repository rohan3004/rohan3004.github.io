//Copyright © 2025 Rohan Chakravarty. All Rights Reserved. Licensed under the MIT License. You may obtain a copy of the License at https://rcxdev.com/LICENSE This file is provided "as is", without warranty of any kind.
async function submitForm(e){e.preventDefault();const t={name:document.getElementById("name").value,email:document.getElementById("email").value,contactNo:document.getElementById("contactNo").value,message:document.getElementById("message").value},a=await fetch("https://apis.byrohan.in/v1/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),o=await a.text();document.querySelector(".TitleBar").innerText=`${o}`}function clearForm(){document.getElementById("form").reset(),document.querySelector(".TitleBar").innerText=""}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("musicModal"),t=document.getElementById("playMusic"),a=document.getElementById("noMusic"),o=document.getElementById("backgroundMusic"),n=document.getElementById("musicModalContainer");function s(){document.body.style.overflow=""}function i(){n.classList.add("fade-out"),e.addEventListener("animationend",()=>{e.style.display="none"})}document.body.style.overflow="hidden",e.style.display="flex",n.classList.remove("fade-out"),setTimeout(()=>{e.classList.add("fade-in")},10);let r=!1;t.addEventListener("click",()=>{o.play(),r=!0,i(),s()}),a.addEventListener("click",()=>{i(),s()}),document.addEventListener("visibilitychange",function(){r&&(document.hidden?o.pause():o.play())})}),window.addEventListener("scroll",function(){const e=document.querySelector(".menu");window.innerHeight+window.scrollY>=document.documentElement.scrollHeight?e.classList.add("hidden"):e.classList.remove("hidden")});const API_URL="https://apis.byrohan.in/v1/reports/rohan.chakravarty02@gmail.com",COLORS={lineBorder:"#a9b0f9",lineFillTop:"rgba(169, 176, 249, 0.3)",lineFillBottom:"rgba(169, 176, 249, 0.0)",text:"#f2e3ee",textDim:"rgba(242, 227, 238, 0.6)",grid:"rgba(242, 227, 238, 0.1)",pie:{codechef:"#F29F05",codeforces:"#4DB6AC",easy:"#673AB7",medium:"#E91E63",hard:"#2196F3",gfg:"#FF5722"}};function generateSimulatedTrend(e,t,a,o){const n=[],s=[],i=t||0,r=a||i,d="LeetCode"===e?1500:0;for(let t=0;t<o;t++){let a;if(0===t)a=d;else if(t===o-1)a=i;else if(t===Math.floor(o/2))a=r;else{const n=Math.floor(o/2);let s=t<n?d+t/n*(r-d):r+(t-n)/n*(i-r);a=Math.floor(s+(Math.random()-.5)*("LeetCode"===e?40:20))}n.push(Math.max(0,a)),s.push("")}return{labels:s,data:n}}function updateSummaryHTML(e){const t=document.getElementById("platform-summary");t&&(t.innerHTML=e)}let currentLineChart=null;function loadPlatformData(e){fetch(API_URL).then(e=>e.json()).then(t=>{let a,o;if("leetcode"===e){const e=t.leetcode;a=generateSimulatedTrend("LeetCode",e.rating,e.rating,12),o=`I have participated in <span class="highlight">${e.contests_attended}</span> LeetCode events. Rating: <span class="highlight">${e.rating}</span>.`}else if("codeforces"===e){const e=t.codeforces;a=generateSimulatedTrend("Codeforces",e.rating,e.rating_max,10),o=`Codeforces Rating: <span class="highlight">${e.rating}</span> (Max: <span class="highlight">${e.rating_max}</span>).`}else if("codechef"===e){const e=t.codechef;a=generateSimulatedTrend("CodeChef",e.rating,e.rating,8),o=`CodeChef Rating: <span class="highlight">${e.rating}</span>.`}else if("geeksforgeeks"===e){const e=t.geeksforgeeks,n=e.problems_solved_total||0;a=generateSimulatedTrend("GFG",n,n,15),o=`Solved <span class="highlight">${n}</span> problems on GFG. Streak: <span class="highlight">${e.streak_current}</span>.`}updateSummaryHTML(o);const n=document.getElementById("ratingChart").getContext("2d"),s=n.createLinearGradient(0,0,0,300);s.addColorStop(0,COLORS.lineFillTop),s.addColorStop(1,COLORS.lineFillBottom),currentLineChart&&currentLineChart.destroy(),currentLineChart=new Chart(n,{type:"line",data:{labels:a.labels,datasets:[{label:"Ratings",data:a.data,borderColor:COLORS.lineBorder,backgroundColor:s,borderWidth:3,tension:.4,fill:!0,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:COLORS.lineBorder,pointBorderColor:"#fff",pointBorderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:2,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(20, 20, 30, 0.9)",titleColor:COLORS.text,bodyColor:COLORS.text,borderColor:"rgba(255,255,255,0.1)",borderWidth:1,callbacks:{title:()=>"",label:e=>`Ratings: ${e.parsed.y}`}}},scales:{x:{display:!1},y:{border:{display:!1},grid:{color:COLORS.grid,borderDash:[5,5]},ticks:{color:COLORS.textDim,font:{family:"Poppins",size:10}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}})}).catch(e=>console.error(e))}function setYear(){document.getElementById("year").textContent=(new Date).getFullYear()}function playRandomBackgroundMusic(){const e=["music1.mp3","music2.mp3","music3.mp3","music4.mp3","music5.mp3"],t=`https://rcxdev.com/assets/music/${e[Math.floor(Math.random()*e.length)]}`,a=document.getElementById("backgroundMusic");a&&(a.src=t,a.play().catch(e=>{console.log("Autoplay was prevented by the browser. User must interact with the page first.")}))}async function fetchGitHubData(){const e={"404-Page":"./assets/projects/p1.png","Queen-s-Quest":"./assets/projects/p2.png","DevOps-Showcase":"./assets/projects/p3.png","Evaluator-System":"./assets/projects/p6.png","Face-Frenzy":"./assets/projects/p4.png",chessMind:"./assets/projects/p5.png"};try{const t=await fetch("https://apis.byrohan.in/v1/github/repositories"),a=await t.json(),o=a.filter(t=>e.hasOwnProperty(t.name));if(Array.isArray(a)){const t=document.getElementById("repo-container");for(const a of o){const o=`https://rohan3004.github.io/${a.name}`,n=await fetch(`https://apis.byrohan.in/v1/github/languages/${a.name}`),s=await n.json(),i=Object.keys(s).map(e=>`<span class="language-item">${e}</span>`).join(", "),r=document.createElement("div");r.className="repo-card",r.innerHTML=`\n                    <div class="article-container" onclick="window.location.href='${o}';">\n                        <img src="${e[a.name]}" alt="${a.name}" loading="lazy">\n                        <div class="repo-content">\n                            <h3>\n                                <a href="${a.html_url}" target="_blank">${a.name}</a>\n                                <span class="stars"><i class="fa-solid fa-star" style="color:yellow;"></i> ${a.stargazers_count}</span>\n                            </h3>\n                            <div class="repo-stats">\n                                <div class="language">${i||"N/A"}</div>\n                            </div>\n                            <p>${a.description||"No description provided."}</p>\n                        </div>\n                    </div>`,t.appendChild(r)}}else console.error("Error: Repository data is not an array",a)}catch(e){console.error("Error fetching GitHub data:",e)}}async function getWeather(){try{const e=await fetch("https://api.weatherapi.com/v1/current.json?key=fc9c2d13772441e9b72191328240604&q=Kolkata"),t=await e.json();t&&t.current?(document.getElementById("temp").textContent=`${t.current.temp_c}°C in Kolkata`,document.getElementById("condition").textContent=`${t.current.condition.text} ${t.current.pressure_mb} hPa`,document.getElementById("icon").src=`https:${t.current.condition.icon}`,document.getElementById("humidity").textContent=t.current.humidity,document.getElementById("wind").textContent=`${t.current.wind_dir} ${t.current.wind_kph}`):document.getElementById("weatherRohan").innerHTML="<p>City not found</p>"}catch(e){console.error("Error fetching weather data:",e),document.getElementById("weatherRohan").innerHTML="<p>Unable to get weather data</p>"}}function htmlInstaPost(e,{caption:t,imageUrl:a}){return`\n        <div class="instagram-photo">\n            <div class="instagram-header">\n                <figure>\n                    <img src="./assets/insta-pic.jpg" alt="Rohan Chakravarty" width="42" height="42" loading="lazy">\n                    <figcaption><h4>rohan.chakravarty</h4></figcaption>\n                </figure>\n            </div>\n            <div class="insta-media"><img src="${a}" alt="Photograph ${e}" loading="lazy"/></div>\n            <div class="insta-buttons">\n                <div class="left">\n                    <svg class="instagram__icon instagram__icon--heart" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.8196 3.40477L16.8196 3.40468L16.8105 3.40435C15.9939 3.37401 15.1837 3.55848 14.4607 3.93934C13.7415 4.31818 13.1337 4.87813 12.6974 5.56376C12.3799 6.0141 12.1595 6.38237 12.0011 6.66645C11.841 6.38254 11.6182 6.01451 11.2971 5.5646C10.8588 4.88294 10.252 4.32584 9.53521 3.94728C8.81455 3.56666 8.00746 3.37954 7.19284 3.40423L7.19283 3.40408L7.18038 3.40477C5.73422 3.48471 4.37827 4.133 3.40801 5.20836C2.44041 6.28078 1.93462 7.69124 1.99999 9.13385C2.00344 10.8131 2.73878 12.1587 3.76066 13.3486C4.54375 14.2605 5.52952 15.1172 6.516 15.9745C6.80035 16.2216 7.08476 16.4688 7.36439 16.7173C7.71256 17.0283 8.0484 17.3289 8.36875 17.6156C9.03981 18.2163 9.64287 18.7561 10.1488 19.2024C10.8808 19.8482 11.4505 20.3358 11.7281 20.5156L11.9996 20.6915L12.2713 20.516C12.5291 20.3494 13.0097 19.9415 13.7041 19.3303C14.2257 18.8712 14.8883 18.2789 15.7018 17.5517C15.9935 17.2909 16.3047 17.0128 16.6357 16.7172C16.9253 16.4597 17.2205 16.2037 17.5157 15.9477C18.4876 15.105 19.4601 14.2617 20.2346 13.3628C21.2586 12.1744 21.9965 10.8264 22 9.13385C22.0653 7.69123 21.5596 6.28078 20.592 5.20836C19.6217 4.133 18.2657 3.48471 16.8196 3.40477ZM11.6142 4.35506L11.9954 4.80294L12.3761 4.35467C12.9155 3.71951 13.5913 3.21422 14.3531 2.87644C15.1144 2.53889 15.9419 2.37731 16.7742 2.40369C18.4866 2.47112 20.1027 3.21362 21.2694 4.46897C22.4364 5.72476 23.0588 7.39158 23.0003 9.10494L23 9.11347V9.122C23 12.4787 20.5608 14.6294 18.1924 16.6842C17.8966 16.94 17.598 17.2003 17.3031 17.462L17.3018 17.4632L16.3798 18.2872L16.3736 18.2927L16.3676 18.2985C15.2327 19.3827 14.0415 20.4065 12.7991 21.3656C12.5599 21.5162 12.2829 21.5962 12 21.5962C11.7171 21.5962 11.4402 21.5162 11.201 21.3657C9.9972 20.4352 8.84189 19.4436 7.73965 18.3948L7.73401 18.3894L7.7282 18.3842L6.7012 17.4662L6.70057 17.4657C6.43759 17.2314 6.17305 17.0015 5.91337 16.7758C5.88988 16.7554 5.86643 16.735 5.84303 16.7147C3.34442 14.5424 0.999982 12.4694 0.999982 9.122V9.11347L0.999691 9.10494C0.941196 7.39158 1.56352 5.72476 2.73058 4.46897C3.89709 3.21378 5.51295 2.47131 7.2251 2.40372C8.0557 2.37962 8.88112 2.54227 9.6405 2.87968C10.4006 3.21742 11.0751 3.72163 11.6142 4.35506Z"></path></svg>\n                    <svg class="instagram__icon instagram__icon--comment" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.656 17.008C21.8711 14.9061 22.2795 12.4337 21.8048 10.0527C21.3301 7.67172 20.0048 5.54497 18.0765 4.06978C16.1482 2.59458 13.7488 1.87186 11.3266 2.0366C8.9043 2.20135 6.62486 3.24231 4.91408 4.96501C3.20329 6.68772 2.17817 8.97432 2.03024 11.3977C1.8823 13.821 2.62166 16.2153 4.1102 18.1334C5.59874 20.0514 7.73463 21.3619 10.1189 21.82C12.5031 22.2782 14.9726 21.8527 17.066 20.623L22 22L20.656 17.008Z"></path></svg>\n                    <svg class="instagram__icon instagram__icon--message" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 3 9.218 10.083M11.698 20.334 22 3.001H2L9.218 10.084 11.698 20.334Z"></path></svg>\n                </div>\n                <div class="right"><svg class="instagram__icon instagram__icon--saved" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 21L12 13.44L4 21V3H20V21Z"></path></svg></div>\n            </div>\n            <h2 class="sp-captions">${t}</h2>\n        </div>`}fetch(API_URL).then(e=>e.json()).then(e=>{const t=document.getElementById("dsaPieChart");if(!t)return;const a=t.getContext("2d"),o=[e.codechef.problems_solved_total||0,e.codeforces.problems_solved_total||0,e.leetcode.problems_solved_easy||0,e.leetcode.problems_solved_medium||0,e.leetcode.problems_solved_hard||0,e.geeksforgeeks.problems_solved_total||0],n={id:"centerText",beforeDraw:function(e){const{ctx:t}=e;t.restore();const a=e.config.data.datasets[0].data.reduce((e,t)=>e+t,0),o=e.getDatasetMeta(0);if(!o.data[0])return;const n=o.data[0].innerRadius,s=o.data[0].x,i=o.data[0].y;t.font=`bold ${(.6*n).toFixed(2)}px Poppins`,t.textBaseline="middle",t.textAlign="center",t.fillStyle=COLORS.text,t.fillText(a,s,i-.15*n),t.font=`500 ${(.2*n).toFixed(2)}px Poppins`,t.fillStyle=COLORS.textDim,t.fillText("Solved",s,i+.25*n),t.save()}};let s=null;new Chart(a,{type:"doughnut",data:{labels:["CodeChef","Codeforces","LC Easy","LC Medium","LC Hard","GFG"],datasets:[{data:o,backgroundColor:[COLORS.pie.codechef,COLORS.pie.codeforces,COLORS.pie.easy,COLORS.pie.medium,COLORS.pie.hard,COLORS.pie.gfg],borderWidth:0,offset:0}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"75%",layout:{padding:20},onClick:(e,t,a)=>{if(t[0]){const e=t[0].index;s=s===e?null:e,a.data.datasets[0].offset=a.data.datasets[0].data.map((e,t)=>t===s?20:0),a.update()}else s=null,a.data.datasets[0].offset=a.data.datasets[0].data.map(()=>0),a.update()},plugins:{legend:{display:!0,position:"bottom",labels:{color:COLORS.text,font:{family:"Poppins",size:11},usePointStyle:!0,boxWidth:8}},tooltip:{enabled:!0},datalabels:{display:!1}}},plugins:[n]})}),document.addEventListener("DOMContentLoaded",()=>{loadPlatformData("leetcode"),document.querySelectorAll('input[name="platform"]').forEach(e=>{e.addEventListener("change",e=>loadPlatformData(e.target.value))})});const imageCaptions=new Map([[1,{caption:"Lost in Heaven<br>Shot on Canon EOS R10",imageUrl:"./assets/photography/p11.png"}],[2,{caption:"Hadimba Temple<br>Shot on Canon EOS R10",imageUrl:"./assets/photography/p12.png"}],[3,{caption:"It's Either You or Nobody✨<br>Shot on Xiaomi 11T Pro",imageUrl:"./assets/photography/p10.jpeg"}],[4,{caption:"Sunset<br>Shot on Xiaomi 11T Pro",imageUrl:"./assets/photography/p9.jpg"}],[5,{caption:"Kolkata Christmas<br>Shot on Xiaomi 11T Pro",imageUrl:"./assets/photography/p8.jpg"}],[6,{caption:"Khiderpore Docks<br>Shot on Redmi Note 10 Pro Max",imageUrl:"./assets/photography/p7.jpg"}],[7,{caption:"Macro Photography<br>Shot on Redmi Note 10 Pro Max",imageUrl:"./assets/photography/p6.jpg"}],[8,{caption:"Railway Tracks<br>Shot on Redmi K30",imageUrl:"./assets/photography/p5.jpg"}],[9,{caption:"Fountain Stop Motion<br>Shot on Redmi K30",imageUrl:"./assets/photography/p4.jpg"}],[10,{caption:"Beautiful Sunrise Sky<br>Shot on Redmi K30",imageUrl:"./assets/photography/p3.jpg"}],[11,{caption:"Night Photography - Bulb Mode<br>Shot on Redmi Note 8 Pro",imageUrl:"./assets/photography/p2.jpg"}],[12,{caption:"Annual Solar Eclipse<br>Shot on Redmi Note 8 Pro",imageUrl:"./assets/photography/p1.jpg"}]]);function GenerateInstaPosts(){for(const[e,t]of imageCaptions.entries()){if(e>4&&window.innerWidth<=768)break;try{const a=document.getElementById("sp"),o=document.createElement("div");o.className="repo-card",o.innerHTML=htmlInstaPost(e,t),a.appendChild(o)}catch(t){console.error("Error generating card for index",e,t)}}}async function loadStats(){try{const e=await fetch("https://apis.byrohan.in/v1/reports/rohan.chakravarty02@gmail.com");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json(),a=(t.codechef?.problems_solved_total||0)+(t.codeforces?.problems_solved_total||0)+(t.geeksforgeeks?.problems_solved_total||0)+(t.leetcode?.problems_solved_total||0),o=t.leetcode?.platform_specific?.badges||0,n=t.leetcode?.streak_max||0,s=t.leetcode?.platform_specific?.top_percentage||0,i=t.codechef?.platform_specific?.contest_rank_stars||2;document.getElementById("total-questions").textContent=a,document.getElementById("total-active-days").textContent=o,document.getElementById("submissions").textContent=s,document.getElementById("max-streak").textContent=n,document.getElementById("codechef-badge").textContent=i}catch(e){console.error("Failed to fetch stats:",e),document.getElementById("total-questions").textContent="Error",document.getElementById("total-active-days").textContent="Error"}}window.onload=()=>{setYear(),fetchGitHubData(),getWeather(),loadStats(),GenerateInstaPosts(),playRandomBackgroundMusic()};