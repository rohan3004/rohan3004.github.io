//Copyright Â© 2025 Rohan Chakravarty. All Rights Reserved. Licensed under the MIT License. You may obtain a copy of the License at https://rcxdev.com/LICENSE This file is provided "as is", without warranty of any kind.
const API_URL="https://apis.byrohan.in/v1/reports/rohan.chakravarty02@gmail.com",COLORS={lineBorder:"#a9b0f9",lineFillTop:"rgba(169, 176, 249, 0.3)",lineFillBottom:"rgba(169, 176, 249, 0.0)",text:"#f2e3ee",textDim:"rgba(242, 227, 238, 0.6)",grid:"rgba(242, 227, 238, 0.1)",pie:{codechef:"#F29F05",codeforces:"#4DB6AC",easy:"#673AB7",medium:"#E91E63",hard:"#2196F3",gfg:"#FF5722"}};function generateSimulatedTrend(e,t,a,o){const n=[],l=[],r=t||0,s=a||r,i="LeetCode"===e?1500:0;for(let t=0;t<o;t++){let a;if(0===t)a=i;else if(t===o-1)a=r;else if(t===Math.floor(o/2))a=s;else{const n=Math.floor(o/2);let l=t<n?i+t/n*(s-i):s+(t-n)/n*(r-s);a=Math.floor(l+(Math.random()-.5)*("LeetCode"===e?40:20))}n.push(Math.max(0,a)),l.push("")}return{labels:l,data:n}}function updateSummaryHTML(e){const t=document.getElementById("platform-summary");t&&(t.innerHTML=e)}let currentLineChart=null;function loadPlatformData(e){fetch(API_URL).then(e=>e.json()).then(t=>{let a,o;if("leetcode"===e){const e=t.leetcode;a=generateSimulatedTrend("LeetCode",e.rating,e.rating,12),o=`I have participated in <span class="highlight">${e.contests_attended}</span> LeetCode events. Rating: <span class="highlight">${e.rating}</span>.`}else if("codeforces"===e){const e=t.codeforces;a=generateSimulatedTrend("Codeforces",e.rating,e.rating_max,10),o=`Codeforces Rating: <span class="highlight">${e.rating}</span> (Max: <span class="highlight">${e.rating_max}</span>).`}else if("codechef"===e){const e=t.codechef;a=generateSimulatedTrend("CodeChef",e.rating,e.rating,8),o=`CodeChef Rating: <span class="highlight">${e.rating}</span>.`}else if("geeksforgeeks"===e){const e=t.geeksforgeeks,n=e.problems_solved_total||0;a=generateSimulatedTrend("GFG",n,n,15),o=`Solved <span class="highlight">${n}</span> problems on GFG. Streak: <span class="highlight">${e.streak_current}</span>.`}updateSummaryHTML(o);const n=document.getElementById("ratingChart").getContext("2d"),l=n.createLinearGradient(0,0,0,300);l.addColorStop(0,COLORS.lineFillTop),l.addColorStop(1,COLORS.lineFillBottom),currentLineChart&&currentLineChart.destroy(),currentLineChart=new Chart(n,{type:"line",data:{labels:a.labels,datasets:[{label:"Ratings",data:a.data,borderColor:COLORS.lineBorder,backgroundColor:l,borderWidth:3,tension:.4,fill:!0,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:COLORS.lineBorder,pointBorderColor:"#fff",pointBorderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:2,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(20, 20, 30, 0.9)",titleColor:COLORS.text,bodyColor:COLORS.text,borderColor:"rgba(255,255,255,0.1)",borderWidth:1,callbacks:{title:()=>"",label:e=>`Ratings: ${e.parsed.y}`}}},scales:{x:{display:!1},y:{border:{display:!1},grid:{color:COLORS.grid,borderDash:[5,5]},ticks:{color:COLORS.textDim,font:{family:"Poppins",size:10}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}})}).catch(e=>console.error(e))}fetch(API_URL).then(e=>e.json()).then(e=>{const t=document.getElementById("dsaPieChart");if(!t)return;const a=t.getContext("2d"),o=[e.codechef.problems_solved_total||0,e.codeforces.problems_solved_total||0,e.leetcode.problems_solved_easy||0,e.leetcode.problems_solved_medium||0,e.leetcode.problems_solved_hard||0,e.geeksforgeeks.problems_solved_total||0],n={id:"centerText",beforeDraw:function(e){const{ctx:t}=e;t.restore();const a=e.config.data.datasets[0].data.reduce((e,t)=>e+t,0),o=e.getDatasetMeta(0);if(!o.data[0])return;const n=o.data[0].innerRadius,l=o.data[0].x,r=o.data[0].y;t.font=`bold ${(.6*n).toFixed(2)}px Poppins`,t.textBaseline="middle",t.textAlign="center",t.fillStyle=COLORS.text,t.fillText(a,l,r-.15*n),t.font=`500 ${(.2*n).toFixed(2)}px Poppins`,t.fillStyle=COLORS.textDim,t.fillText("Solved",l,r+.25*n),t.save()}};let l=null;new Chart(a,{type:"doughnut",data:{labels:["CodeChef","Codeforces","LC Easy","LC Medium","LC Hard","GFG"],datasets:[{data:o,backgroundColor:[COLORS.pie.codechef,COLORS.pie.codeforces,COLORS.pie.easy,COLORS.pie.medium,COLORS.pie.hard,COLORS.pie.gfg],borderWidth:0,offset:0}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"75%",layout:{padding:20},onClick:(e,t,a)=>{if(t[0]){const e=t[0].index;l=l===e?null:e,a.data.datasets[0].offset=a.data.datasets[0].data.map((e,t)=>t===l?20:0),a.update()}else l=null,a.data.datasets[0].offset=a.data.datasets[0].data.map(()=>0),a.update()},plugins:{legend:{display:!0,position:"bottom",labels:{color:COLORS.text,font:{family:"Poppins",size:11},usePointStyle:!0,boxWidth:8}},tooltip:{enabled:!0},datalabels:{display:!1}}},plugins:[n]})}),document.addEventListener("DOMContentLoaded",()=>{loadPlatformData("leetcode"),document.querySelectorAll('input[name="platform"]').forEach(e=>{e.addEventListener("change",e=>loadPlatformData(e.target.value))})});